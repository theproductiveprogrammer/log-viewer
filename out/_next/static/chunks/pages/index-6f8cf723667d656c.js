(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return l(8749)}])},8749:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return k}});var r=l(5893),n=l(1189),a=l.n(n),c=l(7294),s=l(9008),i=l.n(s),o=l(1163),_=l(9034),u=l.n(_),h=l(9818),m=l.n(h),g=l(120);function d(e){let{title:t,txt:l}=e,[n,a]=(0,c.useState)(""),s=null;if(n){try{s=RegExp(n,"i")}catch(e){}if(!s)try{s=RegExp(escapeRegex(n),"i")}catch(e){}}let i=l?l.split(/[\r\n]+/g).map((e,t)=>{if(!(e=e.trim()))return null;let l=s?-1!=e.search(s):null;return{txt:e,num:t+1,search_match:l}}).filter(e=>e):null;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:m().title,children:t}),(0,r.jsx)(f,{lines:i,search:n,setSearch:a}),(0,r.jsx)(v,{lines:i})]})}function f(e){let{lines:t,search:l,setSearch:n}=e,a=0;return t&&t.forEach(e=>{e.search_match&&a++}),(0,r.jsxs)("div",{className:m().searchcont,children:[(0,r.jsx)("input",{value:l,onChange:e=>n(e.target.value),className:m().search,type:"text",placeholder:"/search"}),l?(0,r.jsxs)("div",{className:m().srcont,children:[(0,r.jsxs)("div",{className:m().srcopy,onClick:function(){if(!t)return;let e=t.filter(e=>e.search_match).map(e=>e.txt);e.length&&navigator.clipboard.writeText(e.join("\n")).then(()=>alert("copied to clipboard")).catch(e=>console.error(e))},children:["\uD83D\uDD0D ",a]}),(0,r.jsx)("div",{className:m().srclear,onClick:()=>n(""),children:"ⓧ"})]}):""]})}function v(e){let{lines:t}=e,[l,n]=(0,c.useState)({}),[a,s]=(0,c.useState)(""),[i,o]=(0,c.useState)(100);if((0,c.useEffect)(()=>{if(!t||!t.length)return;let e=i,l=0;for(;t.length>e;){if(++l>100)return;let r=t.length-e,n=w([t[r]],{},"")[0];if(n.date||n.meta.length||n.level||n.source)break;e+=1}e!=i&&o(e)},[i,t]),!t||!t.length)return(0,r.jsx)("div",{});let _=(0,r.jsx)("div",{className:m().prev,children:"0 left"}),u=t;if(t.length>i){let e=t.length-i;u=t.slice(e,t.length),_=(0,r.jsxs)("div",{className:m().prevactive,onClick:function(){let e=i+1;for(let l=e;t.length>l;l++){let e=t[t.length-l];if(e.search_match){o(l);return}}o(i+50)},children:["↑...",e," more"]})}let h=w(u,l,a);function g(e){let t=l[e.num]||0;n(l=>({...l,[e.num]:t+1}))}function d(){window.getSelection()?s(window.getSelection().toString()):s("")}return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:m().counter,children:[_,(0,r.jsxs)("div",{className:m().count,children:[u.length," shown"]})]}),(0,r.jsx)(x,{marks:l,loglines:h}),(0,r.jsx)("div",{className:m().logcontainer,onMouseUp:d,onDoubleClick:d,children:h.map(e=>(0,r.jsx)(p,{ll:e,mark:g,sel:a},e.num))})]})}function x(e){let{loglines:t,marks:l}=e,n={};for(let e in l){let t=n[l[e]]||0;n[l[e]]=t+1}let a=[];for(let e in n){if(!(e%3))continue;let c=m()["mark".concat(e%3)]||"";a.push((0,r.jsxs)("div",{className:"".concat(m().markscopy," ").concat(c),onClick:()=>(function(e){let r=[];for(let n in l){if(l[n]!=e)continue;let a=function(e){for(let l=0;l<t.length;l++){let r=t[l];if(r.num==e)return r}}(n);a&&r.push(a.txt)}0!=r.length&&navigator.clipboard.writeText(r.join("\n")).then(()=>alert("copied to clipboard")).catch(e=>console.error(e))})(e),children:[(0,r.jsx)("div",{className:m().mark},e),(0,r.jsx)("div",{children:n[e]})]},e))}return(0,r.jsx)("div",{className:m().markscopycont,children:a})}function p(e){var t;let{ll:l,mark:n,sel:a}=e,c=m()["mark".concat((l.mark||0)%3)]||"",s=m()["level-".concat(l.level).toLowerCase()]||"",i="";!1===l.search_match&&(i=m().search_result_fail),!0===l.search_match&&(i=m().search_result_pass);let o=l.date||l.level;return(0,r.jsxs)("div",{className:"".concat(m().logline," ").concat(s," ").concat(c," ").concat(i),children:[(0,r.jsx)("div",{className:m().mark,onClick:()=>n(l)}),(0,r.jsxs)("div",{className:m().logcontent,children:[o?(0,r.jsxs)("div",{className:m().logline_header,children:[(0,r.jsx)("div",{className:m().date,children:l.date&&l.date.toLocaleString(g.ou.DATETIME_FULL)}),(0,r.jsx)("div",{className:m().level,children:l.level&&"[".concat(l.level,"]")}),l.source?(0,r.jsxs)("div",{className:m().source,children:[l.source,": "]}):""]}):"",(0,r.jsx)("div",{className:m().msgcont,children:(0,r.jsx)("div",{className:m().msg,children:(t=function(e){if(!a||a.length<5)return e;let t=RegExp(a.replace(/[/\-\\^$*+?.()|[\]{}]/g,"\\$&"),"gi");return e.replace(t,'<span class="'.concat(m().selected,'">$&</span>'))}(t=function(e){if(!l.level||"error"!=l.level.toLowerCase())return e;let t=e.split(/[\r\n]/g),r=!1;return(t=t.map(e=>e.startsWith("at ")?(r=!0,'<span class="'.concat(m().err_stack_minim,'">').concat(e,"</span>")):'<span class="'.concat(m().err_stack_hl,'">').concat(e,"</span>")),r)?(t.unshift('<div class="'.concat(m().err_stack_block,'">')),t.push("</div>"),t.join("\n")):e}(t=l.msg)),(0,r.jsx)("div",{dangerouslySetInnerHTML:{__html:t}}))})}),(0,r.jsx)("div",{className:m().metacont,children:l.meta.map((e,t)=>(0,r.jsx)("div",{className:m().meta,children:e},t))})]})]})}function w(e,t,l){let r=[],n=()=>({txt:null,meta:[],date:null,level:null,source:null,msg:null,num:null,search_match:null}),a=n();return e.forEach(e=>{a.txt?a.txt+="\n"+e.txt:a.txt=e.txt;let l={line_left:e.txt,curr_chunk:null};for(;;){a.date||(a.date=function(e){let t=e.line_left,l=t.length;for(l>35&&(l=35);l>8;){let r=function(e){let t=[g.ou.fromISO,g.ou.fromRFC2822,g.ou.fromHTTP,g.ou.fromSQL];for(let l=0;l<t.length;l++){let r=t[l](e);if(!r.invalid)return r}}(t.substring(0,l));if(r)return e.curr_chunk=null,e.line_left=e.line_left.substring(l).trim(),r;l--}}(l));let e=function(e){if(!e.line_left)return null;let t=/^\s*\[/,l=e.line_left.match(t);if(l){let t=e.line_left.indexOf("]");return e.curr_chunk=e.line_left.substring(l[0].length,t).trim(),e.line_left=e.line_left.substring(t+1).trim(),e.curr_chunk}return t=/[\s:-]+/,(l=e.line_left.match(t))?(e.curr_chunk=e.line_left.substring(0,l.index),e.line_left=e.line_left.substring(l.index+l[0].length)):(e.curr_chunk=e.line_left,e.line_left=""),e.curr_chunk}(l);if(!e){l.line_left=a.meta.join(" "),a.meta=[];break}if(a.level){a.source=e;break}if(/^(INFO|DEBUG|TRACE|WARN|ERROR)$/.test(e)){a.level=e;continue}a.meta.push(e)}if(0==r.length||a.date||a.level||a.sources||a.meta.length)a.msg=l.line_left,a.num=e.num,a.mark=t[a.num],!0===e.search_match&&(a.search_match=!0),!1!==e.search_match||a.search_match||(a.search_match=!1),r.push(a);else if(l.line_left){let t=r[r.length-1];e.search_match&&(t.search_match=!0),!0===e.search_match&&(t.search_match=!0),!1!==e.search_match||t.search_match||(t.search_match=!1),t.msg+="\n"+l.line_left,t.txt+="\n"+a.txt}a=n()}),r}function k(){let[e,t]=(0,c.useState)(""),[l,n]=(0,c.useState)(!0),[s,_]=(0,c.useState)(!1),h=(0,o.useRouter)();return((0,c.useEffect)(()=>{let e=h.query.l;e&&(_(!0),fetch(e).then(async e=>{if(!e.ok)throw _(!1),Error("Network response was not ok");let l=await e.text();_(!1),t(l)}).catch(e=>{_(!1),console.error(e)}));let l=h.query.q;l?n(!0):n(!1)},[h]),s)?(0,r.jsx)("div",{className:u().loading,children:"Loading..."}):l?(0,r.jsxs)("main",{className:"".concat(u().plain," ").concat(a().className),children:[(0,r.jsx)(d,{title:"Log Viewer",txt:e}),(0,r.jsx)("textarea",{className:u().plainentry,value:e,onChange:e=>t(e.target.value)})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(i(),{children:[(0,r.jsx)("title",{children:"Log Viewer"}),(0,r.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,r.jsxs)("main",{className:"".concat(u().main," ").concat(a().className),children:[(0,r.jsxs)("div",{className:u().entry,children:[(0,r.jsx)("p",{children:"Paste your log below:"}),(0,r.jsx)("textarea",{value:e,onChange:e=>t(e.target.value)})]}),(0,r.jsx)("div",{className:u().display,children:(0,r.jsx)(d,{title:"Log Viewer",txt:e})})]})]})}},9034:function(e){e.exports={main:"Home_main__VkIEL",entry:"Home_entry__X8Bja",display:"Home_display__56dAz",plain:"Home_plain__Skpol",plainentry:"Home_plainentry__rPvmX",loading:"Home_loading__Z_JGo"}},9818:function(e){e.exports={title:"LogViewer_title__AK3Cr",logcontainer:"LogViewer_logcontainer__mO8hL",logline:"LogViewer_logline__z_oZS",logline_header:"LogViewer_logline_header__Ddiut",mark:"LogViewer_mark__wL0D2",mark1:"LogViewer_mark1__PaZOH",mark2:"LogViewer_mark2__yhhue",mark3:"LogViewer_mark3__nIgnW",level:"LogViewer_level__mrUB3","level-info":"LogViewer_level-info__dzs0a","level-debug":"LogViewer_level-debug__4FXs9","level-trace":"LogViewer_level-trace__nTBkI","level-warn":"LogViewer_level-warn__P5V9N","level-error":"LogViewer_level-error__WSwh2",metacont:"LogViewer_metacont__Zz4lw",meta:"LogViewer_meta__W0ubZ",source:"LogViewer_source__SOXZf",msgcont:"LogViewer_msgcont__g8CLa",logcontent:"LogViewer_logcontent__auoNC",selected:"LogViewer_selected__VM0Ik",counter:"LogViewer_counter__PP8rE",prevactive:"LogViewer_prevactive__PWy8O",searchcont:"LogViewer_searchcont__wrmKR",search:"LogViewer_search__5A_Ju",search_result_fail:"LogViewer_search_result_fail__73zF8",search_result_pass:"LogViewer_search_result_pass__Oa6t_",markscopycont:"LogViewer_markscopycont__lOZ2N",markscopy:"LogViewer_markscopy__RSRAb",srcont:"LogViewer_srcont__GElQC",srcopy:"LogViewer_srcopy__rn3O4",srclear:"LogViewer_srclear__jkgNE",err_stack_block:"LogViewer_err_stack_block__25WiU",err_stack_hl:"LogViewer_err_stack_hl__sXUtw",err_stack_minim:"LogViewer_err_stack_minim__1ygGZ"}}},function(e){e.O(0,[773,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);