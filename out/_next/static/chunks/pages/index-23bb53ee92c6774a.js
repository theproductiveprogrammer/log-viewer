(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(8749)}])},8749:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return N}});var l=n(5893),r=n(1189),s=n.n(r),a=n(7294),i=n(9008),c=n.n(i),o=n(1163),_=n(9034),u=n.n(_),h=n(9818),f=n.n(h),m=n(120),d=n(3852);n(9755);let g=Object.assign({},d.jF,{container:f().json_container,label:f().json_label,nullValue:f().json_nullValue,stringValue:f().json_stringValue});function x(e){if(!e)return null;if(/^\d+$/.test(e))try{return RegExp("\\b".concat(e,"\\b"),"i")}catch(e){}try{return RegExp(e,"i")}catch(e){}try{return RegExp(escapeRegex(e),"i")}catch(e){}return null}function p(e){var t;let{title:n,txt:r,refresh:s}=e,[i,c]=(0,a.useState)(""),[o,_]=(0,a.useState)([]),[u,h]=(0,a.useState)({}),m=x(i),d=((t=function(e){if(!e)return null;e=e.split(/[\r\n]+/g);let t=[];for(let l=0;l<e.length;l++){let r=e[l];if(r){if(t.length&&n(r)){let e=t[t.length-1].txt;if(!(!e||n(e))&&-1===e.indexOf("\n")&&-1!==e.search(/exception|error/i)&&t.length>1){let e=t.pop().txt+"\n"+r;t[t.length-1].txt+="\n"+e}else t[t.length-1].txt+="\n"+r}else t.push({txt:r,num:l+1})}}return t;function n(e){return e.length<8||e.startsWith(" ")||e.startsWith("	")}}(r))&&t.length&&o&&o.length&&o.forEach(e=>{let n=[],l=!1;for(let r=0;r<t.length;r++){let s=t[r];if(u[s.num]){n.push(s),l=!0;continue}if(l){l=!1,n.push(s);continue}l=!1,"+"===e.t?-1!=s.txt.search(e.s)&&n.push(s):-1==s.txt.search(e.s)&&n.push(s)}t=n}),t);return d&&d.forEach(e=>{e.search_match=m&&e.txt?-1!=e.txt.search(m):null}),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:f().title,children:n}),(0,l.jsx)(j,{lines:d,search:i,setSearch:c,filters:o,setFilters:_}),(0,l.jsx)(w,{marks:u,search:i,setMarks:h,lines:d,refresh:s})]})}async function v(e){if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(e);else{let t=document.createElement("textarea");t.value=e,t.style.position="absolute",t.style.left="-999999px",document.body.prepend(t),t.select();try{document.execCommand("copy")}catch(e){console.error(e)}finally{t.remove()}}}function j(e){let{lines:t,search:n,setSearch:r,filters:s,setFilters:a}=e,i=n?f().enabled:f().disabled,c=s&&s.length?f().enabled:f().disabled;return(0,l.jsxs)("div",{className:f().searchcont,children:[(0,l.jsx)("input",{value:n,onChange:e=>r(e.target.value),className:f().search,type:"text",placeholder:"/search"}),(0,l.jsxs)("div",{className:f().srcont,children:[(0,l.jsx)("div",{className:"".concat(f().srcopy," ").concat(i),onClick:function(){if(!n||!t)return;let e=t.filter(e=>e.search_match).map(e=>e.txt);e.length&&v(e.join("\n")).then(()=>alert("copied to clipboard")).catch(e=>console.error(e))},children:"\uD83D\uDD0D"}),(0,l.jsxs)("div",{className:f().filter_bar,children:[(0,l.jsx)("div",{className:"".concat(f().filter_in," ").concat(i),onClick:function(){n&&(a(e=>e.concat({t:"+",s:x(n)})),r(""))},children:"✓"}),(0,l.jsx)("div",{className:"".concat(f().filter_out," ").concat(i),onClick:function(){n&&(a(e=>e.concat({t:"-",s:x(n)})),r(""))},children:"\uD835\uDDD1"}),(0,l.jsx)("div",{className:"".concat(f().filter_pop," ").concat(c),onClick:function(){a(e=>e.slice(0,-1)),r("")},children:"⟲"})]}),(0,l.jsx)("div",{className:f().srclear,onClick:()=>r(""),children:"ⓧ"})]})]})}function w(e){let{search:t,marks:n,setMarks:r,lines:s,refresh:i}=e,[c,o]=(0,a.useState)(""),[_,u]=(0,a.useState)(100),[h,m]=(0,a.useState)(!1);if((0,a.useEffect)(()=>{if(!s||!s.length)return;let e=_,t=0;for(;s.length>e;){if(++t>100)return;let n=s.length-e,l=V([s[n]],{},"")[0];if(l.date||l.meta.length||l.level||l.source)break;e+=1}e!=_&&u(e)},[_,s]),!s||!s.length)return(0,l.jsx)("div",{});let d=(0,l.jsx)("div",{className:f().prev,children:"0 left"}),g=(0,l.jsx)("div",{className:f().prev,children:"\xa0"}),x=s;if(s.length>_){let e=s.length-_;x=s.slice(e,s.length),d=(0,l.jsxs)("div",{className:f().prevactive,onClick:function(){u(_+50)},children:["↑...",e," more"]})}let p=function(){if(!s||!s.length)return 0;let e=0;return s.forEach(t=>e+=t.search_match?1:0),e}();t&&(g=(0,l.jsxs)("div",{className:f().sres,children:[(0,l.jsx)("span",{className:f().sresprev,onClick:function(){let e=_+1;for(let t=e;s.length>t;t++){let e=s[s.length-t];if(e.search_match){u(t);return}}},children:"↑"})," (",p," found)"]}));let v=V(x,n,c);function j(e){let t=n[e.num]||0,l=(t+1)%3;r(t=>({...t,[e.num]:l}))}return(0,l.jsxs)(l.Fragment,{children:[i?(0,l.jsx)("div",{className:f().refreshbtn,onClick:i,children:"Refresh"}):"",(0,l.jsx)("div",{className:f().refreshbtn,onClick:()=>m(!h),children:h?"Full":"Compact"}),(0,l.jsxs)("div",{className:f().counter,children:[d,(0,l.jsxs)("div",{className:f().count,children:[x.length," shown"]}),g]}),(0,l.jsx)(k,{marks:n,loglines:v}),(0,l.jsx)("div",{className:f().logcontainer,children:v.map(e=>(0,l.jsx)(L,{compact:h,ll:e,mark:j,sel:c},e.num))})]})}function k(e){let{loglines:t,marks:n}=e,r={};for(let e in n){let t=r[n[e]]||0;r[n[e]]=t+1}let s=[];for(let e in r){if(!e||"0"==e)continue;let a=f()["mark".concat(e)]||"";s.push((0,l.jsxs)("div",{className:"".concat(f().markscopy," ").concat(a),onClick:()=>(function(e){let l=[];for(let r in n){if(n[r]!=e)continue;let s=function(e){for(let n=0;n<t.length;n++){let l=t[n];if(l.num==e)return l}}(r);s&&l.push(s.txt)}0!=l.length&&v(l.join("\n")).then(()=>alert("copied to clipboard")).catch(e=>console.error(e))})(e),children:[(0,l.jsx)("div",{className:f().mark},e),(0,l.jsx)("div",{children:r[e]})]},e))}return(0,l.jsxs)("div",{className:f().markscopycont,children:[s,"\xa0"]})}function L(e){let{ll:t,mark:n,sel:r,compact:s}=e,a=f()["mark".concat(t.mark||0)]||"",i=f()["level-".concat(t.level).toLowerCase()]||"",c=s?f().compact:"",o=s?0:Array.isArray(t.json)?2:1,_="";!1===t.search_match&&(_=f().search_result_fail),!0===t.search_match&&(_=f().search_result_pass);let u=t.date||t.level;return(0,l.jsxs)("div",{className:"".concat(f().logline," ").concat(c," ").concat(i," ").concat(a," ").concat(_),children:[(0,l.jsx)("div",{className:f().mark,onClick:()=>n(t)}),(0,l.jsxs)("div",{className:f().logcontent,children:[!s&&u?(0,l.jsxs)("div",{className:f().logline_header,children:[(0,l.jsx)("div",{className:f().date,children:t.date&&t.date.toLocaleString(m.ou.DATETIME_FULL)}),(0,l.jsx)("div",{className:f().level,children:t.level&&"[".concat(t.level,"]")}),t.source?(0,l.jsxs)("div",{className:f().source,children:[t.source,": "]}):""]}):"",(0,l.jsxs)("div",{className:f().msgcont,children:[(0,l.jsx)("div",{className:f().msg,children:function(e){if(!e)return;let n=function(e){if(!t.level||"error"!=t.level.toLowerCase()&&"warn"!=t.level.toLowerCase())return null;let n=e.split(/[\r\n]/g),l=!1;return(n=n.map(e=>e.trim().startsWith("at ")?(l=!0,'<span class="'.concat(f().err_stack_minim,'">').concat(e,"</span>")):'<span class="'.concat(f().err_stack_hl,'">').concat(e,"</span>")),l)?(n.unshift('<div class="'.concat(f().err_stack_block,'">')),n.push("</div>"),n.join("\n")):null}(e);return n?(0,l.jsx)("div",{dangerouslySetInnerHTML:{__html:n}}):e}(t.msg)}),t.json?(0,l.jsx)(d.gc,{data:t.json,shouldInitiallyExpand:e=>e<o,style:g}):""]}),s?"":(0,l.jsx)("div",{className:f().metacont,children:t.meta.map((e,t)=>(0,l.jsx)("div",{className:f().meta,children:e},t))})]})]})}function V(e,t,n){let l=[];return e.forEach(e=>{let n=function(e){let t={json:null,txt:e.txt,meta:[],date:null,level:null,source:null,msg:null,num:null,search_match:null},n={line_left:e.txt,curr_chunk:null};for(;!(n.line_left.startsWith("{")||n.line_left.startsWith("["))||(r(n,0,t),!t.json);){t.date||(t.date=function(e){let t=e.line_left,n=t.length,l=e.line_left.match(/[\r\n]/);for(l&&(n=l.index),n>35&&(n=35);n>8;){let l=s(t.substring(0,n));if(l)return e.curr_chunk=null,e.line_left=e.line_left.substring(n).trim(),l;n--}}(n));let e=function(e){if(e.sep=null,!e.line_left)return null;if(e.line_left.startsWith("\n")||e.line_left.startsWith("\r"))return e.curr_chunk=e.line_left,e.line_left="",e.curr_chunk;let t=/^[ \t]*\[/,n=e.line_left.match(t);if(n){let t=e.line_left.indexOf("]");if(-1!=t)return e.curr_chunk=e.line_left.substring(n[0].length,t).trim(),e.line_left=e.line_left.substring(t+1).trim(),e.sep="[]",e.curr_chunk}if(t=/[ \t:-]+/,n=e.line_left.match(t)){e.curr_chunk=e.line_left.substring(0,n.index);let t=n[0].trim();t.length&&(e.sep=t),e.line_left=e.line_left.substring(n.index+n[0].length)}else e.curr_chunk=e.line_left,e.line_left="";return e.curr_chunk}(n);if(!e&&!n.line_left){n.line_left=t.meta.join(" "),t.meta=[];break}if(e){if(t.level){n.sep?t.source=e:n.line_left=e+" "+n.line_left;break}if(/^(INFO|DEBUG|TRACE|WARN|ERROR)$/.test(e)){t.level=e;continue}t.meta.push(e)}}if(!t.json){let e=n.line_left.indexOf("{");r(n,e,t)}if(!t.json){let e=n.line_left.indexOf("[");r(n,e,t)}return function(e){let t=e.json;t&&(!e.date&&t.timestamp&&(e.date=s(t.timestamp)),!e.date&&t.ts&&(e.date=s(t.ts)),!e.date&&t.tm&&(e.date=s(t.tm)),!e.date&&t.date&&(e.date=s(t.date)),!e.date&&t.datetime&&(e.date=s(t.datetime)),!e.level&&t.level&&(e.level=t.level),!e.level&&t.error&&(e.level="ERROR"),!e.source&&t.source&&(e.source=t.source))}(t),t.msg=n.line_left,t}(e);if(0==l.length||n.json||n.date||n.level||n.sources||n.meta.length)n.num=e.num,n.mark=t[n.num],!0===e.search_match&&(n.search_match=!0),!1!==e.search_match||n.search_match||(n.search_match=!1),l.push(n);else if(n.msg){let t=l[l.length-1];e.search_match&&(t.search_match=!0),!0===e.search_match&&(t.search_match=!0),!1!==e.search_match||t.search_match||(t.search_match=!1),t.msg+="\n"+n.msg,t.txt+="\n"+n.txt}}),l;function r(e,t,n){if(-1!=t&&e.line_left)try{if(t){let l=e.line_left.substring(t).trim();n.json=JSON.parse(l),e.line_left=e.line_left.substring(0,t)}else n.json=JSON.parse(e.line_left),e.line_left=null}catch(e){}}function s(e){if("number"==typeof e){let t=m.ou.fromMillis(e);return t&&!t.invalid||(t=m.ou.fromSeconds(e))&&!t.invalid?t:void 0}if("string"!=typeof e)return;let t=[m.ou.fromISO,m.ou.fromRFC2822,m.ou.fromHTTP,m.ou.fromSQL];for(let n=0;n<t.length;n++){let l=t[n](e);if(!l.invalid)return l}}}function N(){let[e,t]=(0,a.useState)(""),[n,r]=(0,a.useState)(!1),[i,_]=(0,a.useState)(!0),[h,f]=(0,a.useState)(!1),m=(0,o.useRouter)();return((0,a.useEffect)(()=>{let e=m.query.l;e&&(f(!0),fetch(e).then(async e=>{if(!e.ok)throw f(!1),Error("Network response was not ok");let n=await e.text();f(!1),t(n),r(!0)}).catch(e=>{f(!1),console.error(e)}));let n=m.query.q;n?_(!0):_(!1)},[m]),h)?(0,l.jsx)("div",{className:u().loading,children:"Loading..."}):i?(0,l.jsxs)("main",{className:"".concat(u().plain," ").concat(s().className),children:[(0,l.jsx)(p,{title:"Log Viewer",refresh:()=>m.reload(),txt:e}),(0,l.jsx)("textarea",{className:u().plainentry,value:e,onChange:e=>t(e.target.value)})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(c(),{children:[(0,l.jsx)("title",{children:"Log Viewer"}),(0,l.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,l.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,l.jsxs)("main",{className:"".concat(u().main," ").concat(s().className),children:[(0,l.jsxs)("div",{className:u().entry,children:[(0,l.jsx)("p",{children:"Paste your log below:"}),(0,l.jsx)("textarea",{value:e,onChange:e=>t(e.target.value)})]}),(0,l.jsx)("div",{className:u().display,children:(0,l.jsx)(p,{title:"Log Viewer",txt:e})})]})]})}},9034:function(e){e.exports={main:"Home_main__VkIEL",entry:"Home_entry__X8Bja",display:"Home_display__56dAz",plain:"Home_plain__Skpol",plainentry:"Home_plainentry__rPvmX",loading:"Home_loading__Z_JGo"}},9818:function(e){e.exports={title:"LogViewer_title__AK3Cr",logcontainer:"LogViewer_logcontainer__mO8hL",logline:"LogViewer_logline__z_oZS",compact:"LogViewer_compact__tNFD_",logline_header:"LogViewer_logline_header__Ddiut",mark:"LogViewer_mark__wL0D2",mark2:"LogViewer_mark2__yhhue",mark1:"LogViewer_mark1__PaZOH",mark3:"LogViewer_mark3__nIgnW",level:"LogViewer_level__mrUB3","level-info":"LogViewer_level-info__dzs0a","level-debug":"LogViewer_level-debug__4FXs9","level-trace":"LogViewer_level-trace__nTBkI","level-warn":"LogViewer_level-warn__P5V9N","level-error":"LogViewer_level-error__WSwh2",refreshbtn:"LogViewer_refreshbtn__8HDsu",metacont:"LogViewer_metacont__Zz4lw",meta:"LogViewer_meta__W0ubZ",source:"LogViewer_source__SOXZf",msgcont:"LogViewer_msgcont__g8CLa",logcontent:"LogViewer_logcontent__auoNC",selected:"LogViewer_selected__VM0Ik",counter:"LogViewer_counter__PP8rE",prevactive:"LogViewer_prevactive__PWy8O",sresprev:"LogViewer_sresprev__ik_5u",searchcont:"LogViewer_searchcont__wrmKR",search:"LogViewer_search__5A_Ju",search_result_fail:"LogViewer_search_result_fail__73zF8",search_result_pass:"LogViewer_search_result_pass__Oa6t_",markscopycont:"LogViewer_markscopycont__lOZ2N",markscopy:"LogViewer_markscopy__RSRAb",srcont:"LogViewer_srcont__GElQC",srcopy:"LogViewer_srcopy__rn3O4",srclear:"LogViewer_srclear__jkgNE",filter_bar:"LogViewer_filter_bar__9yy0c",filter_in:"LogViewer_filter_in__bOvz_",filter_out:"LogViewer_filter_out__HLcin",filter_pop:"LogViewer_filter_pop__SfLBx",disabled:"LogViewer_disabled__PfnEx",err_stack_block:"LogViewer_err_stack_block__25WiU",err_stack_hl:"LogViewer_err_stack_hl__sXUtw",err_stack_minim:"LogViewer_err_stack_minim__1ygGZ",json_container:"LogViewer_json_container__w3pzU",json_label:"LogViewer_json_label__Ems3A",json_stringValue:"LogViewer_json_stringValue__acoVT",json_nullValue:"LogViewer_json_nullValue__DHc2K"}}},function(e){e.O(0,[763,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);